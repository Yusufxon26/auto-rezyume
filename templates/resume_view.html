{% extends "base.html" %}
{% block title %}{{ resume.full_name }} - CV{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
    <div class="card shadow-lg border-0">
        <!-- Header qismi -->
        <div class="card-header text-white py-4" style="background: linear-gradient(135deg, #0f2027, #203a43);">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h2 class="mb-1">{{ resume.full_name }}</h2>
                    <h5 class="mb-0 text-white-50">{{ resume.profession }}</h5>
                </div>
                <div class="col-md-4 text-end">
                    <a href="{{ url_for('download_resume', id=resume.id) }}" class="btn btn-light btn-lg">
                        ğŸ“¥ PDF yuklab olish
                    </a>
                </div>
            </div>
        </div>

        <div class="card-body p-4">
            <div class="row">
                <!-- Chap ustun - Asosiy ma'lumotlar -->
                <div class="col-md-8">
                    
                    <!-- Kasbiy maqsad -->
                    {% if resume.career_objective %}
                    <div class="cv-section mb-4">
                        <h5 class="cv-section-title">ğŸ¯ Kasbiy maqsad</h5>
                        <p class="text-justify" style="white-space: pre-line;">{{ resume.career_objective }}</p>
                    </div>
                    {% endif %}

                    <!-- Ish tajribasi -->
                    {% if resume.work_company %}
                    <div class="cv-section mb-4">
                        <h5 class="cv-section-title">ğŸ’¼ Ish tajribasi</h5>
                        <div class="cv-item">
                            <h6 class="fw-bold mb-1">{{ resume.work_position }}</h6>
                            <p class="text-muted mb-1">{{ resume.work_company }} | {{ resume.work_years }}</p>
                            <p style="white-space: pre-line;">{{ resume.work_duties }}</p>
                        </div>
                    </div>
                    {% endif %}

                    <!-- Ta'lim -->
                    {% if resume.education_institution %}
                    <div class="cv-section mb-4">
                        <h5 class="cv-section-title">ğŸ“ Ta'lim</h5>
                        <div class="cv-item">
                            <h6 class="fw-bold mb-1">{{ resume.education_degree }} - {{ resume.education_field }}</h6>
                            <p class="text-muted mb-1">{{ resume.education_institution }} | {{ resume.education_years }}</p>
                            {% if resume.education_details %}
                            <p style="white-space: pre-line;">{{ resume.education_details }}</p>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}

                    <!-- Ko'nikmalar -->
                    {% if resume.technical_skills or resume.soft_skills %}
                    <div class="cv-section mb-4">
                        <h5 class="cv-section-title">âš¡ Ko'nikmalar</h5>
                        {% if resume.technical_skills %}
                        <p><strong>Texnik:</strong> {{ resume.technical_skills }}</p>
                        {% endif %}
                        {% if resume.soft_skills %}
                        <p><strong>Shaxsiy:</strong> {{ resume.soft_skills }}</p>
                        {% endif %}
                    </div>
                    {% endif %}

                    <!-- Loyihalar -->
                    {% if resume.projects %}
                    <div class="cv-section mb-4">
                        <h5 class="cv-section-title">ğŸš€ Loyihalar</h5>
                        <p style="white-space: pre-line;">{{ resume.projects }}</p>
                    </div>
                    {% endif %}

                    <!-- Sertifikatlar -->
                    {% if resume.certificates %}
                    <div class="cv-section mb-4">
                        <h5 class="cv-section-title">ğŸ“œ Sertifikatlar</h5>
                        <p style="white-space: pre-line;">{{ resume.certificates }}</p>
                    </div>
                    {% endif %}

                    <!-- Yutuqlar -->
                    {% if resume.achievements %}
                    <div class="cv-section mb-4">
                        <h5 class="cv-section-title">ğŸ† Yutuqlar</h5>
                        <p style="white-space: pre-line;">{{ resume.achievements }}</p>
                    </div>
                    {% endif %}

                </div>

                <!-- O'ng ustun - Qo'shimcha ma'lumotlar -->
                <div class="col-md-4">
                    
                    <!-- Foto -->
                    {% if resume.photo_path %}
                    <div class="text-center mb-4">
                        <img src="{{ url_for('static', filename='uploads/' + resume.photo_path) }}" 
                             alt="Foto" 
                             class="img-fluid rounded shadow"
                             style="max-width: 180px; max-height: 240px; object-fit: cover;">
                    </div>
                    {% endif %}

                    <!-- Aloqa ma'lumotlari -->
                    <div class="cv-sidebar-section mb-4">
                        <h6 class="cv-sidebar-title">ğŸ“ Aloqa</h6>
                        {% if resume.phone %}
                        <p class="small mb-1"><strong>Tel:</strong> {{ resume.phone }}</p>
                        {% endif %}
                        {% if resume.email %}
                        <p class="small mb-1"><strong>Email:</strong> {{ resume.email }}</p>
                        {% endif %}
                        {% if resume.city %}
                        <p class="small mb-1"><strong>Shahar:</strong> {{ resume.city }}</p>
                        {% endif %}
                        {% if resume.address %}
                        <p class="small mb-1"><strong>Manzil:</strong> {{ resume.address }}</p>
                        {% endif %}
                        {% if resume.birth_date %}
                        <p class="small mb-1"><strong>Tug'ilgan:</strong> {{ resume.birth_date }}</p>
                        {% endif %}
                    </div>

                    <!-- Tillar -->
                    {% if resume.languages %}
                    <div class="cv-sidebar-section mb-4">
                        <h6 class="cv-sidebar-title">ğŸŒ Tillar</h6>
                        <p class="small" style="white-space: pre-line;">{{ resume.languages }}</p>
                    </div>
                    {% endif %}

                    <!-- Qiziqishlar -->
                    {% if resume.interests %}
                    <div class="cv-sidebar-section mb-4">
                        <h6 class="cv-sidebar-title">ğŸ¨ Qiziqishlar</h6>
                        <p class="small" style="white-space: pre-line;">{{ resume.interests }}</p>
                    </div>
                    {% endif %}

                </div>
            </div>
        </div>

        <!-- Footer - Actions -->
        <div class="card-footer bg-light">
            <div class="d-flex justify-content-between">
                <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
                    â† Ortga
                </a>
                <div>
                    <a href="{{ url_for('download_resume', id=resume.id) }}" class="btn btn-success me-2">
                        ğŸ“¥ PDF yuklab olish
                    </a>
                    <form action="{{ url_for('delete_resume', id=resume.id) }}" method="POST" style="display:inline;"
                          onsubmit="return confirm('Rostdan ham o\'chirmoqchimisiz?')">
                        <button type="submit" class="btn btn-danger">ğŸ—‘ O'chirish</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.cv-section-title {
    color: #0f2027;
    border-bottom: 2px solid #0f2027;
    padding-bottom: 8px;
    margin-bottom: 15px;
    font-weight: 600;
}

.cv-sidebar-title {
    color: #203a43;
    border-bottom: 1px solid #ddd;
    padding-bottom: 5px;
    margin-bottom: 10px;
    font-weight: 600;
}

.cv-sidebar-section {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    border-left: 3px solid #0f2027;
}

.cv-item {
    padding: 10px;
    background: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 10px;
}
</style>
{% endblock %}
